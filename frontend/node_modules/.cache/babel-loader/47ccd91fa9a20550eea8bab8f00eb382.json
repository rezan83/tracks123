{"remainingRequest":"/home/rezan/Desktop/Projects/tracks/frontend/node_modules/babel-loader/lib/index.js!/home/rezan/Desktop/Projects/tracks/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/rezan/Desktop/Projects/tracks/frontend/src/store/tracks.js","dependencies":[{"path":"/home/rezan/Desktop/Projects/tracks/frontend/src/store/tracks.js","mtime":1609698815964},{"path":"/home/rezan/Desktop/Projects/tracks/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rezan/Desktop/Projects/tracks/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/rezan/Desktop/Projects/tracks/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvcmV6YW4vRGVza3RvcC9Qcm9qZWN0cy90cmFja3MvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwoKZnVuY3Rpb24gX2dyb3VwVHJhY2tzKGFyciwgZ3JvdXBCeSkgewogIHJldHVybiBhcnIucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cikgewogICAgdmFyIHByb3AgPSBjdXJbZ3JvdXBCeV07CgogICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYWNjLCBwcm9wKSkgewogICAgICBhY2NbcHJvcF0gPSBbXTsKICAgIH0KCiAgICBpZiAoIWFjY1twcm9wXS5pbmNsdWRlcyhjdXIpKSB7CiAgICAgIGFjY1twcm9wXS5wdXNoKGN1cik7CiAgICB9CgogICAgcmV0dXJuIGFjYzsKICB9LCB7fSk7Cn0KCmZ1bmN0aW9uIF9maWx0ZXJBcnIoYXJyLCBmaWx0ZXJzKSB7CiAgcmV0dXJuIGFyci5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGZvciAodmFyIGtleSBpbiBmaWx0ZXJzKSB7CiAgICAgIGlmIChmaWx0ZXJzW2tleV0gJiYgKGl0ZW1ba2V5XSA9PT0gdW5kZWZpbmVkIHx8IGl0ZW1ba2V5XSAhPSBmaWx0ZXJzW2tleV0pKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfSk7Cn0KCmZ1bmN0aW9uIF9jYXJyaWVyRGF0YShhcnIpIHsKICB2YXIgaW5pdGlhbENhcnJpZXJEYXRhID0gewogICAgdG90YWxfY28yX2VtaXR0ZWQ6IDAsCiAgICB0cmF2ZWxsZWRfZGlzdGFuY2U6IDAsCiAgICB3ZWlnaHQ6IDAsCiAgICBmdWVsX2NvbnN1bWVkOiAwLAogICAgc2hpcG1lbnRzOiBhcnIubGVuZ3RoCiAgfTsKICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBjdXIpIHsKICAgIGFjYy50b3RhbF9jbzJfZW1pdHRlZCArPSBjdXIudG90YWxfY28yX2VtaXR0ZWQ7CiAgICBhY2MudHJhdmVsbGVkX2Rpc3RhbmNlICs9IGN1ci50cmF2ZWxsZWRfZGlzdGFuY2U7CiAgICBhY2MuZnVlbF9jb25zdW1lZCArPSBjdXIuZnVlbF9jb25zdW1lZDsKICAgIGFjYy53ZWlnaHQgKz0gY3VyLndlaWdodDsKICAgIHJldHVybiBhY2M7CiAgfSwgaW5pdGlhbENhcnJpZXJEYXRhKTsKfQoKZXhwb3J0IHZhciB0cmFja3MgPSB7CiAgc3RhdGU6IHsKICAgIHRyYWNrczogW10sCiAgICBncm91cGVkOiB7fSwKICAgIGZpbHRlcnM6IHsKICAgICAgdHlwZV9vZl9jYWxjdWxhdGlvbnM6ICJwcmltYXJ5IiwKICAgICAgdHlwZV9vZl9nb29kczogIkNlcmVhbHMiLAogICAgICBzdGFydF9jaXR5OiAiTcO8bmNoZW4iLAogICAgICBlbmRfY2l0eTogIiIgLy8gc3RhcnRfdGltZTogIiIsCiAgICAgIC8vIGVuZF90aW1lOiAiIiwKCiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRUcmFja3M6IGZ1bmN0aW9uIGdldFRyYWNrcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudHJhY2tzOwogICAgfSwKICAgIGdldEdyb3VwZWQ6IGZ1bmN0aW9uIGdldEdyb3VwZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmdyb3VwZWQ7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFRyYWNrczogZnVuY3Rpb24gc2V0VHJhY2tzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnRyYWNrcyA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0R3JvdXBlZDogZnVuY3Rpb24gc2V0R3JvdXBlZChzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5ncm91cGVkID0gcGF5bG9hZDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGZldGNoVHJhY2tzOiBmdW5jdGlvbiBmZXRjaFRyYWNrcyhfcmVmKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTsKICAgICAgZmV0Y2goIiBodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL3NoaXBtZW50cy8iKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmV0dXJuIHJlc3AuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgY29uc29sZS5sb2coImZldGNoZWQ6IiwgZGF0YS5yZXN1bHRzKTsKICAgICAgICBjb21taXQoInNldFRyYWNrcyIsIGRhdGEucmVzdWx0cyk7CiAgICAgICAgcmV0dXJuIGRhdGEucmVzdWx0czsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgICAgIGNvbnNvbGUubG9nKHN0YXRlLmZpbHRlcnMpOwogICAgICAgIGNvbnNvbGUubG9nKF9maWx0ZXJBcnIocmVzdWx0cywgc3RhdGUuZmlsdGVycykpOwoKICAgICAgICB2YXIgZ3JvdXBlZCA9IF9ncm91cFRyYWNrcyhyZXN1bHRzLCAiY2Fycmllcl9jb21wYW55X2lkIik7CgogICAgICAgIGNvbnNvbGUubG9nKCJHcm91cGVkOiIsIGdyb3VwZWQpOwogICAgICAgIGNvbW1pdCgic2V0R3JvdXBlZCIsIGdyb3VwZWQpOwogICAgICAgIHJldHVybiBncm91cGVkOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChncm91cGVkKSB7CiAgICAgICAgdmFyIG5ncm91cGVkID0gX29iamVjdFNwcmVhZCh7fSwgZ3JvdXBlZCk7CgogICAgICAgIGZvciAodmFyIGtleSBpbiBuZ3JvdXBlZCkgewogICAgICAgICAgbmdyb3VwZWRba2V5XSA9IF9jYXJyaWVyRGF0YShuZ3JvdXBlZFtrZXldKTsKICAgICAgICAgIG5ncm91cGVkW2tleV0uYXZfd2VpZ2h0ID0gbmdyb3VwZWRba2V5XS53ZWlnaHQgJiYgbmdyb3VwZWRba2V5XS53ZWlnaHQgLyBuZ3JvdXBlZFtrZXldLnNoaXBtZW50czsKICAgICAgICAgIG5ncm91cGVkW2tleV0uaW50ZW5zaXR5X2ZhY3RvciA9IC8vIG5ncm91cGVkW2tleV0udG90YWxfY28yX2VtaXR0ZWQvCiAgICAgICAgICAvLyAobmdyb3VwZWRba2V5XS53ZWlnaHQgKiBuZ3JvdXBlZFtrZXldLnRyYXZlbGxlZF9kaXN0YW5jZSk7CiAgICAgICAgICBuZ3JvdXBlZFtrZXldLnRvdGFsX2NvMl9lbWl0dGVkIC8gbmdyb3VwZWRba2V5XS5mdWVsX2NvbnN1bWVkOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coIk5ncm91cGVkIiwgbmdyb3VwZWQpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vZHVsZXM6IHt9Cn07"},{"version":3,"sources":["/home/rezan/Desktop/Projects/tracks/frontend/src/store/tracks.js"],"names":["_groupTracks","arr","groupBy","reduce","acc","cur","prop","Object","prototype","hasOwnProperty","call","includes","push","_filterArr","filters","filter","item","key","undefined","_carrierData","initialCarrierData","total_co2_emitted","travelled_distance","weight","fuel_consumed","shipments","length","tracks","state","grouped","type_of_calculations","type_of_goods","start_city","end_city","getters","getTracks","getGrouped","mutations","setTracks","payload","setGrouped","actions","fetchTracks","commit","fetch","then","resp","json","data","console","log","results","ngrouped","av_weight","intensity_factor","modules"],"mappings":";;;;;;;AAAA,SAASA,YAAT,CAAsBC,GAAtB,EAA2BC,OAA3B,EAAoC;AAClC,SAAOD,GAAG,CAACE,MAAJ,CAAW,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC9B,QAAIC,IAAI,GAAGD,GAAG,CAACH,OAAD,CAAd;;AACA,QAAI,CAACK,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,GAArC,EAA0CE,IAA1C,CAAL,EAAsD;AACpDF,MAAAA,GAAG,CAACE,IAAD,CAAH,GAAY,EAAZ;AACD;;AACD,QAAI,CAACF,GAAG,CAACE,IAAD,CAAH,CAAUK,QAAV,CAAmBN,GAAnB,CAAL,EAA8B;AAC5BD,MAAAA,GAAG,CAACE,IAAD,CAAH,CAAUM,IAAV,CAAeP,GAAf;AACD;;AACD,WAAOD,GAAP;AACD,GATM,EASJ,EATI,CAAP;AAUD;;AAED,SAASS,UAAT,CAAoBZ,GAApB,EAAyBa,OAAzB,EAAkC;AAChC,SAAOb,GAAG,CAACc,MAAJ,CAAW,UAACC,IAAD,EAAU;AAC1B,SAAK,IAAIC,GAAT,IAAgBH,OAAhB,EAAyB;AACvB,UACEA,OAAO,CAACG,GAAD,CAAP,KACCD,IAAI,CAACC,GAAD,CAAJ,KAAcC,SAAd,IAA2BF,IAAI,CAACC,GAAD,CAAJ,IAAaH,OAAO,CAACG,GAAD,CADhD,CADF,EAGE;AACA,eAAO,KAAP;AACD;AACF;;AACD,WAAO,IAAP;AACD,GAVM,CAAP;AAWD;;AAED,SAASE,YAAT,CAAsBlB,GAAtB,EAA2B;AACzB,MAAImB,kBAAkB,GAAG;AACvBC,IAAAA,iBAAiB,EAAE,CADI;AAEvBC,IAAAA,kBAAkB,EAAE,CAFG;AAGvBC,IAAAA,MAAM,EAAE,CAHe;AAIvBC,IAAAA,aAAa,EAAE,CAJQ;AAKvBC,IAAAA,SAAS,EAAExB,GAAG,CAACyB;AALQ,GAAzB;AAOA,SAAOzB,GAAG,CAACE,MAAJ,CACL,UAACC,GAAD,EAAMC,GAAN,EAAc;AACZD,IAAAA,GAAG,CAACiB,iBAAJ,IAAyBhB,GAAG,CAACgB,iBAA7B;AACAjB,IAAAA,GAAG,CAACkB,kBAAJ,IAA0BjB,GAAG,CAACiB,kBAA9B;AACAlB,IAAAA,GAAG,CAACoB,aAAJ,IAAqBnB,GAAG,CAACmB,aAAzB;AACApB,IAAAA,GAAG,CAACmB,MAAJ,IAAclB,GAAG,CAACkB,MAAlB;AACA,WAAOnB,GAAP;AACD,GAPI,EAQLgB,kBARK,CAAP;AAUD;;AAED,OAAO,IAAMO,MAAM,GAAG;AACpBC,EAAAA,KAAK,EAAE;AACLD,IAAAA,MAAM,EAAE,EADH;AAELE,IAAAA,OAAO,EAAE,EAFJ;AAGLf,IAAAA,OAAO,EAAE;AACPgB,MAAAA,oBAAoB,EAAE,SADf;AAEPC,MAAAA,aAAa,EAAE,SAFR;AAGPC,MAAAA,UAAU,EAAE,SAHL;AAIPC,MAAAA,QAAQ,EAAE,EAJH,CAKP;AACA;;AANO;AAHJ,GADa;AAapBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,SADO,qBACGP,KADH,EACU;AACf,aAAOA,KAAK,CAACD,MAAb;AACD,KAHM;AAIPS,IAAAA,UAJO,sBAIIR,KAJJ,EAIW;AAChB,aAAOA,KAAK,CAACC,OAAb;AACD;AANM,GAbW;AAqBpBQ,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCV,KADD,EACQW,OADR,EACiB;AACxBX,MAAAA,KAAK,CAACD,MAAN,GAAeY,OAAf;AACD,KAHQ;AAITC,IAAAA,UAJS,sBAIEZ,KAJF,EAISW,OAJT,EAIkB;AACzBX,MAAAA,KAAK,CAACC,OAAN,GAAgBU,OAAhB;AACD;AANQ,GArBS;AA6BpBE,EAAAA,OAAO,EAAE;AACPC,IAAAA,WADO,6BACwB;AAAA,UAAjBC,MAAiB,QAAjBA,MAAiB;AAAA,UAATf,KAAS,QAATA,KAAS;AAC7BgB,MAAAA,KAAK,CAAC,uCAAD,CAAL,CACGC,IADH,CACQ,UAACC,IAAD;AAAA,eAAUA,IAAI,CAACC,IAAL,EAAV;AAAA,OADR,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,IAAI,CAACG,OAA7B;AACAR,QAAAA,MAAM,CAAC,WAAD,EAAcK,IAAI,CAACG,OAAnB,CAAN;AACA,eAAOH,IAAI,CAACG,OAAZ;AACD,OANH,EAOGN,IAPH,CAOQ,UAACM,OAAD,EAAa;AACjBF,QAAAA,OAAO,CAACC,GAAR,CAAYtB,KAAK,CAACd,OAAlB;AACAmC,QAAAA,OAAO,CAACC,GAAR,CAAYrC,UAAU,CAACsC,OAAD,EAAUvB,KAAK,CAACd,OAAhB,CAAtB;;AACA,YAAIe,OAAO,GAAG7B,YAAY,CAACmD,OAAD,EAAU,oBAAV,CAA1B;;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBrB,OAAxB;AACAc,QAAAA,MAAM,CAAC,YAAD,EAAed,OAAf,CAAN;AACA,eAAOA,OAAP;AACD,OAdH,EAeGgB,IAfH,CAeQ,UAAChB,OAAD,EAAa;AACjB,YAAIuB,QAAQ,qBAAQvB,OAAR,CAAZ;;AACA,aAAK,IAAMZ,GAAX,IAAkBmC,QAAlB,EAA4B;AAC1BA,UAAAA,QAAQ,CAACnC,GAAD,CAAR,GAAgBE,YAAY,CAACiC,QAAQ,CAACnC,GAAD,CAAT,CAA5B;AACAmC,UAAAA,QAAQ,CAACnC,GAAD,CAAR,CAAcoC,SAAd,GACED,QAAQ,CAACnC,GAAD,CAAR,CAAcM,MAAd,IACA6B,QAAQ,CAACnC,GAAD,CAAR,CAAcM,MAAd,GAAuB6B,QAAQ,CAACnC,GAAD,CAAR,CAAcQ,SAFvC;AAGA2B,UAAAA,QAAQ,CAACnC,GAAD,CAAR,CAAcqC,gBAAd,GACE;AACA;AACAF,UAAAA,QAAQ,CAACnC,GAAD,CAAR,CAAcI,iBAAd,GAAkC+B,QAAQ,CAACnC,GAAD,CAAR,CAAcO,aAHlD;AAID;;AACDyB,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBE,QAAxB;AACD,OA5BH;AA6BD;AA/BM,GA7BW;AA8DpBG,EAAAA,OAAO,EAAE;AA9DW,CAAf","sourcesContent":["function _groupTracks(arr, groupBy) {\n  return arr.reduce((acc, cur) => {\n    let prop = cur[groupBy];\n    if (!Object.prototype.hasOwnProperty.call(acc, prop)) {\n      acc[prop] = [];\n    }\n    if (!acc[prop].includes(cur)) {\n      acc[prop].push(cur);\n    }\n    return acc;\n  }, {});\n}\n\nfunction _filterArr(arr, filters) {\n  return arr.filter((item) => {\n    for (let key in filters) {\n      if (\n        filters[key] &&\n        (item[key] === undefined || item[key] != filters[key])\n      ) {\n        return false;\n      }\n    }\n    return true;\n  });\n}\n\nfunction _carrierData(arr) {\n  let initialCarrierData = {\n    total_co2_emitted: 0,\n    travelled_distance: 0,\n    weight: 0,\n    fuel_consumed: 0,\n    shipments: arr.length,\n  };\n  return arr.reduce(\n    (acc, cur) => {\n      acc.total_co2_emitted += cur.total_co2_emitted;\n      acc.travelled_distance += cur.travelled_distance;\n      acc.fuel_consumed += cur.fuel_consumed;\n      acc.weight += cur.weight;\n      return acc;\n    },\n    initialCarrierData\n  );\n}\n\nexport const tracks = {\n  state: {\n    tracks: [],\n    grouped: {},\n    filters: {\n      type_of_calculations: \"primary\",\n      type_of_goods: \"Cereals\",\n      start_city: \"München\",\n      end_city: \"\",\n      // start_time: \"\",\n      // end_time: \"\",\n    },\n  },\n  getters: {\n    getTracks(state) {\n      return state.tracks;\n    },\n    getGrouped(state) {\n      return state.grouped;\n    },\n  },\n  mutations: {\n    setTracks(state, payload) {\n      state.tracks = payload;\n    },\n    setGrouped(state, payload) {\n      state.grouped = payload;\n    },\n  },\n  actions: {\n    fetchTracks({ commit, state }) {\n      fetch(\" http://127.0.0.1:8000/api/shipments/\")\n        .then((resp) => resp.json())\n        .then((data) => {\n          console.log(\"fetched:\", data.results);\n          commit(\"setTracks\", data.results);\n          return data.results;\n        })\n        .then((results) => {\n          console.log(state.filters);\n          console.log(_filterArr(results, state.filters));\n          let grouped = _groupTracks(results, \"carrier_company_id\");\n          console.log(\"Grouped:\", grouped);\n          commit(\"setGrouped\", grouped);\n          return grouped;\n        })\n        .then((grouped) => {\n          let ngrouped = { ...grouped };\n          for (const key in ngrouped) {\n            ngrouped[key] = _carrierData(ngrouped[key]);\n            ngrouped[key].av_weight =\n              ngrouped[key].weight &&\n              ngrouped[key].weight / ngrouped[key].shipments;\n            ngrouped[key].intensity_factor =\n              // ngrouped[key].total_co2_emitted/\n              // (ngrouped[key].weight * ngrouped[key].travelled_distance);\n              ngrouped[key].total_co2_emitted / ngrouped[key].fuel_consumed;\n          }\n          console.log(\"Ngrouped\", ngrouped);\n        });\n    },\n  },\n  modules: {},\n};\n"]}]}